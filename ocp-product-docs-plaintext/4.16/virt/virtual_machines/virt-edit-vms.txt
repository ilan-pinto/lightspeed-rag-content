# Editing virtual machines


You can update a virtual machine (VM) configuration by using the Red Hat OpenShift Container Platform web console. You can update the YAML file or the VirtualMachine details page.
You can also edit a VM by using the command line.
To edit a VM to configure disk sharing by using virtual disks or LUN, see Configuring shared volumes for virtual machines.

# Editing a virtual machine by using the command line

You can edit a virtual machine (VM) by using the command line.

* You installed the oc CLI.

1. Obtain the virtual machine configuration by running the following command:

```terminal
$ oc edit vm <vm_name>
```

2. Edit the YAML configuration.
3. If you edit a running virtual machine, you need to do one of the following:
* Restart the virtual machine.
* Run the following command for the new configuration to take effect:

```terminal
$ oc apply vm <vm_name> -n <namespace>
```


# Adding a disk to a virtual machine

You can add a virtual disk to a virtual machine (VM) by using the Red Hat OpenShift Container Platform web console.

1. Navigate to Virtualization -> VirtualMachines in the web console.
2. Select a VM to open the VirtualMachine details page.
3. On the Disks tab, click Add disk.
4. Specify the Source, Name, Size, Type, Interface, and Storage Class.
1. Optional: You can enable preallocation if you use a blank disk source and require maximum write performance when creating data volumes. To do so, select the Enable preallocation checkbox.
2. Optional: You can clear Apply optimized StorageProfile settings to change the Volume Mode and Access Mode for the virtual disk. If you do not specify these parameters, the system uses the default values from the kubevirt-storage-class-defaults config map.
5. Click Add.


[NOTE]
----
If the VM is running, you must restart the VM to apply the change.
----

## Storage fields



## Advanced storage settings

The following advanced storage settings are optional and available for Blank, Import via URL, and Clone existing PVC disks.

If you do not specify these parameters, the system uses the default storage profile values.



# Adding a secret, config map, or service account to a virtual machine

You add a secret, config map, or service account to a virtual machine by using the Red Hat OpenShift Container Platform web console.

These resources are added to the virtual machine as disks. You then mount the secret, config map, or service account as you would mount any other disk.

If the virtual machine is running, changes do not take effect until you restart the virtual machine. The newly added resources are marked as pending changes at the top of the page.

* The secret, config map, or service account that you want to add must exist in the same namespace as the target virtual machine.

1. Click Virtualization -> VirtualMachines from the side menu.
2. Select a virtual machine to open the VirtualMachine details page.
3. Click Configuration -> Environment.
4. Click Add Config Map, Secret or Service Account.
5. Click Select a resource and select a resource from the list. A six character serial number is automatically generated for the selected resource.
6. Optional: Click Reload to revert the environment to its last saved state.
7. Click Save.

1. On the VirtualMachine details page, click Configuration -> Disks and verify that the resource is displayed in the list of disks.
2. Restart the virtual machine by clicking Actions -> Restart.

You can now mount the secret, config map, or service account as you would mount any other disk.

## Additional resources for config maps, secrets, and service accounts

* Understanding config maps
* Providing sensitive data to pods
* Understanding and creating service accounts